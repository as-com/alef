
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <title>3.4. Combined Rules Â· Fela</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.1.0">
        <meta name="author" content="Robin Frischmann <robin@rofrischmann.de>">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Enhancers.html" />
    
    
    <link rel="prev" href="StaticStyle.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Read Me
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../Introduction.html">
            
                <a href="../Introduction.html">
            
                    
                    1. Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../introduction/Motivation.html">
            
                <a href="../introduction/Motivation.html">
            
                    
                    1.1. Motivation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../introduction/Principles.html">
            
                <a href="../introduction/Principles.html">
            
                    
                    1.2. Principles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../introduction/Benefits.html">
            
                <a href="../introduction/Benefits.html">
            
                    
                    1.3. Benefits
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../introduction/Drawbacks.html">
            
                <a href="../introduction/Drawbacks.html">
            
                    
                    1.4. Drawbacks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../introduction/Ecosystem.html">
            
                <a href="../introduction/Ecosystem.html">
            
                    
                    1.5. Ecosystem
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../introduction/Examples.html">
            
                <a href="../introduction/Examples.html">
            
                    
                    1.6. Examples
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../Basics.html">
            
                <a href="../Basics.html">
            
                    
                    2. Basics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../basics/Rules.html">
            
                <a href="../basics/Rules.html">
            
                    
                    2.1. Rules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../basics/Keyframes.html">
            
                <a href="../basics/Keyframes.html">
            
                    
                    2.2. Keyframes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../basics/Fonts.html">
            
                <a href="../basics/Fonts.html">
            
                    
                    2.3. Fonts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../basics/Renderer.html">
            
                <a href="../basics/Renderer.html">
            
                    
                    2.4. Renderer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../Advanced.html">
            
                <a href="../Advanced.html">
            
                    
                    3. Advanced
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="DOMRendering.html">
            
                <a href="DOMRendering.html">
            
                    
                    3.1. DOM Rendering
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="Plugins.html">
            
                <a href="Plugins.html">
            
                    
                    3.2. Plugins
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="StaticStyle.html">
            
                <a href="StaticStyle.html">
            
                    
                    3.3. Global & Third-Party Styles
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.4" data-path="CombinedRules.html">
            
                <a href="CombinedRules.html">
            
                    
                    3.4. Combined Rules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="Enhancers.html">
            
                <a href="Enhancers.html">
            
                    
                    3.5. Enhancers
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../UsageGuides.html">
            
                <a href="../UsageGuides.html">
            
                    
                    4. Usage Guides
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../guides/UsageWithReact.html">
            
                <a href="../guides/UsageWithReact.html">
            
                    
                    4.1. Usage with React
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../guides/RendererConfiguration.html">
            
                <a href="../guides/RendererConfiguration.html">
            
                    
                    4.2. Renderer Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../guides/ServerRendering.html">
            
                <a href="../guides/ServerRendering.html">
            
                    
                    4.3. Server Rendering
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../API.html">
            
                <a href="../API.html">
            
                    
                    5. API Reference
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../api/createRenderer.html">
            
                <a href="../api/createRenderer.html">
            
                    
                    5.1. createRenderer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../api/Renderer.html">
            
                <a href="../api/Renderer.html">
            
                    
                    5.2. Renderer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../api/render.html">
            
                <a href="../api/render.html">
            
                    
                    5.3. render
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../api/combineRules.html">
            
                <a href="../api/combineRules.html">
            
                    
                    5.4. combineRules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../api/enhance.html">
            
                <a href="../api/enhance.html">
            
                    
                    5.5. enhance
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../Troubleshooting.html">
            
                <a href="../Troubleshooting.html">
            
                    
                    6. Troubleshooting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../FAQ.html">
            
                <a href="../FAQ.html">
            
                    
                    7. FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../Feedback.html">
            
                <a href="../Feedback.html">
            
                    
                    8. Feedback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../Thanks.html">
            
                <a href="../Thanks.html">
            
                    
                    9. Thanks
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >3.4. Combined Rules</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="combined-rules">Combined Rules</h1>
<p>Until now we only saw simple examples, each using only one rule per element, but in reality you often see multiple different CSS classes applied to a single element.</p>
<p>Basically you can do the same with Fela too as you could just concatenate multiple rendered rules.</p>
<pre><code class="lang-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> createRenderer <span class="token punctuation">}</span> from <span class="token string">&apos;fela&apos;</span>

<span class="token keyword">const</span> renderer <span class="token operator">=</span> <span class="token function">createRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> ruleA <span class="token operator">=</span> props <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token string">&apos;red&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ruleB <span class="token operator">=</span> props <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> fontWeight<span class="token punctuation">:</span> <span class="token string">&apos;bold&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> classNameA <span class="token operator">=</span> renderer<span class="token punctuation">.</span><span class="token function">renderRule</span><span class="token punctuation">(</span>ruleA<span class="token punctuation">)</span>
<span class="token keyword">const</span> classNameB <span class="token operator">=</span> renderer<span class="token punctuation">.</span><span class="token function">renderRule</span><span class="token punctuation">(</span>ruleB<span class="token punctuation">)</span>

<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>classNameA <span class="token operator">+</span> <span class="token string">&apos; &apos;</span> <span class="token operator">+</span> classNameB<span class="token punctuation">}</span><span class="token operator">&gt;</span>
    I am red and bold<span class="token punctuation">.</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
</code></pre>
<p>The above example works fine as both style objects have no overlapping rules, but we might run into problems if we have different values for the same property.</p>
<h2 id="specificity-in-css">Specificity in CSS</h2>
<p>To understand the problem, we need to understand what specificity in CSS is. According to <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity" _target="blank">MDN</a>:</p>
<blockquote>
<p>Specificity is the means by which browsers decide which CSS property values are the most relevant to an element and, therefore, will be applied. Specificity is based on the matching rules which are composed of CSS selectors of different sorts.</p>
</blockquote>
<p>The browser calculates a weight for each CSS property to figure out which properties finally get applied to which element. <br>
Fela already simplifies the problem a lot, becauseit only renders flat CSS classes and leaves out all the combinators such as <code>+</code>, <code>&gt;</code>, <code>~</code> or <code> </code>. Still there is one thing we need to consider.</p>
<h3 id="problem-order-matters">Problem: Order Matters</h3>
<blockquote>
<p>When specificity is equal to any of the multiple declarations, the last declaration found in the CSS is applied to the element.</p>
</blockquote>
<p>So, if we render two rules, both setting a CSS <code>color</code>, the last rendered one always wins. Consider the following use-case:</p>
<pre><code class="lang-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> createRenderer <span class="token punctuation">}</span> from <span class="token string">&apos;fela&apos;</span>

<span class="token keyword">const</span> renderer <span class="token operator">=</span> <span class="token function">createRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> ruleA <span class="token operator">=</span> props <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token string">&apos;red&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ruleB <span class="token operator">=</span> props <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token string">&apos;blue&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> classNameA <span class="token operator">=</span> renderer<span class="token punctuation">.</span><span class="token function">renderRule</span><span class="token punctuation">(</span>ruleA<span class="token punctuation">)</span>
<span class="token keyword">const</span> classNameB <span class="token operator">=</span> renderer<span class="token punctuation">.</span><span class="token function">rendeRule</span><span class="token punctuation">(</span>ruleB<span class="token punctuation">)</span>

<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>classNameA <span class="token operator">+</span> <span class="token string">&apos; &apos;</span> <span class="token operator">+</span> classNameB<span class="token punctuation">}</span><span class="token operator">&gt;</span>
    I am always blue<span class="token punctuation">,</span> no matter which order the classNames are passed<span class="token punctuation">.</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
</code></pre>
<h2 id="solution-combined-rules">Solution: Combined Rules</h2>
<p>By using combined rules we can merge multiple rules into a single one. Again, the order matters. But this time we can determine the order on our own.
To combine rules, Fela provides the <a href="../api/combineRules.html"><code>combineRules</code></a> helper.</p>
<h3 id="example">Example</h3>
<pre><code class="lang-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> createRenderer<span class="token punctuation">,</span> combineRules <span class="token punctuation">}</span> from <span class="token string">&apos;fela&apos;</span>

<span class="token keyword">const</span> renderer <span class="token operator">=</span> <span class="token function">createRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> ruleA <span class="token operator">=</span> props <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token string">&apos;red&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ruleB <span class="token operator">=</span> props <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> color<span class="token punctuation">:</span> <span class="token string">&apos;blue&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> ruleAB <span class="token operator">=</span> <span class="token function">combineRules</span><span class="token punctuation">(</span>ruleA<span class="token punctuation">,</span> ruleB<span class="token punctuation">)</span>
<span class="token keyword">const</span> ruleBA <span class="token operator">=</span> <span class="token function">combineRules</span><span class="token punctuation">(</span>ruleB<span class="token punctuation">,</span> ruleA<span class="token punctuation">)</span>

<span class="token keyword">const</span> elementAB <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>renderer<span class="token punctuation">.</span><span class="token function">renderRule</span><span class="token punctuation">(</span>ruleAB<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    I am always blue<span class="token punctuation">.</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> elementBA <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>renderer<span class="token punctuation">.</span><span class="token function">renderRule</span><span class="token punctuation">(</span>ruleBA<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    I am always red<span class="token punctuation">.</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
</code></pre>
<p>It does not matter whether <code>ruleA</code> and <code>ruleB</code> get rendered later or if they won&apos;t get rendered at all. <code>ruleAB</code> and <code>ruleBA</code> are completely new rules which are not dependent on their base rules.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="StaticStyle.html" class="navigation navigation-prev " aria-label="Previous page: 3.3. Global & Third-Party Styles">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Enhancers.html" class="navigation navigation-next " aria-label="Next page: 3.5. Enhancers">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"3.4. Combined Rules","level":"1.4.4","depth":2,"next":{"title":"3.5. Enhancers","level":"1.4.5","depth":2,"path":"docs/advanced/Enhancers.md","ref":"docs/advanced/Enhancers.md","articles":[]},"previous":{"title":"3.3. Global & Third-Party Styles","level":"1.4.3","depth":2,"path":"docs/advanced/StaticStyle.md","ref":"docs/advanced/StaticStyle.md","articles":[]},"dir":"ltr"},"config":{"plugins":["edit-link","prism","-highlight","github","anker-enable"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{},"github":{"url":"https://github.com/rofrischmann/fela/"},"anker-enable":{},"search":{},"lunr":{"maxIndexSize":1000000},"fontsettings":{"theme":"white","family":"sans","size":2},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"base":"https://github.com/rofrischmann/fela/tree/master","label":"Edit This Page"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Robin Frischmann <robin@rofrischmann.de>","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Fela","language":"en","gitbook":"3.1.0","description":"Official documentation for Fela"},"file":{"path":"docs/advanced/CombinedRules.md","mtime":"2016-07-03T10:57:14.000Z","type":"markdown"},"gitbook":{"version":"3.1.0","time":"2016-07-04T15:50:09.571Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-anker-enable/anker.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

